@if (user()) {
<mat-drawer-container class="w-auto h-dvh">
  <mat-drawer mode="side" opened class="w-auto!">
    <div class="flex items-start flex-col h-full">
      <mat-nav-list>
        <h2 matSubheader>Channels</h2>
        <button mat-list-item>
          <mat-icon matListItemIcon>add</mat-icon>
          <span matListItemTitle>Add Channel</span>
        </button>
        @for (channel of userChannels(); track $index) {
        <button mat-list-item>
          <mat-icon matListItemIcon>{{ channel.type === 'private' ? 'lock' : 'groups' }}</mat-icon>
          <span matListItemTitle>{{ channel.name }}</span>
        </button>
        }
      </mat-nav-list>
      <mat-divider></mat-divider>
      <mat-nav-list>
        <h2 matSubheader>Direct messages</h2>
        @for (chat of combinedChats(); track $index) {
            <div class="relative">
              @if(chat.unreadCount > 0) {
                <div class="absolute top-0 right-0 w-5 h-5 bg-red-700 rounded-full z-10 text-xs flex justify-center items-center text-white">{{ chat.unreadCount }}</div>
              }
                <a class="relative" mat-list-item [routerLink]="chat.id">
                  <img matListItemIcon [src]="imagePath + chat.avatar_url" />
                  <span matListItemTitle>{{ chat.first_name }}</span>
                </a>
            </div>
        }
      </mat-nav-list>
    </div>
  </mat-drawer>
  <mat-drawer-content>
    <router-outlet></router-outlet>
  </mat-drawer-content>
</mat-drawer-container>
}@else {
<p>Home content</p>
}
